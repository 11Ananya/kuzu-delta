load("@rules_cc//cc:defs.bzl", "cc_library")
load("@rules_cc//cc:defs.bzl", "cc_binary")

cc_library(
    name = "column",
    srcs = ["include/column.h"],
    visibility = ["//visibility:public"],
    deps = [
        "buffer_manager",
        "file_handle",
        "//src/common:storage_constants",
        "//src/common:types",
    ],
)

cc_library(
    name = "graph",
    hdrs = ["include/graph.h"],
    visibility = ["//visibility:public"],
    deps = [
        "catalog",
    ],
)

cc_library(
    name = "graph_loader",
    srcs = ["graph_loader.cpp"],
    hdrs = ["include/graph_loader.h"],
    visibility = ["//visibility:public"],
    deps = [
        "catalog",
        "graph",
        "//src/common:csv_reader",
        "//src/common:types",
        "@gabime_spdlog",
        "@nlohmann_json",
    ],
)

cc_library(
    name = "catalog",
    hdrs = ["include/catalog.h"],
    visibility = ["//visibility:public"],
    deps = ["//src/common:types"],
)

cc_library(
    name = "buffer_manager",
    srcs = ["buffer_manager.cpp"],
    hdrs = ["include/buffer_manager.h"],
    visibility = ["//visibility:public"],
    deps = [
        "file_handle",
        "//src/common:storage_constants",
    ],
)

cc_library(
    name = "file_handle",
    srcs = ["file_handle.cpp"],
    hdrs = ["include/file_handle.h"],
    visibility = ["//visibility:public"],
    deps = [
        "//src/common:storage_constants",
    ],
)
